{"version":3,"sources":["assets/js/main.js","../../../../../../../usr/local/lib/node_modules/parcel-bundler/src/builtins/bundle-url.js","../../../../../../../usr/local/lib/node_modules/parcel-bundler/src/builtins/css-loader.js"],"names":["simpleLevelPlan","levelChars","Player","Coin","Lava","Level","plan","rows","trim","split","map","l","height","lenght","width","startActors","row","y","ch","x","type","push","create","Vec","State","level","actors","status","find","a","other","factor","pos","speed","plus","prototype","size","reset","basePos","wobble","Math","random","PI","elt","name","attrs","dom","document","createElement","Object","keys","attr","setAttribute","children","child","appendChild","DOMDisplay","parent","class","drawGrid","actorLayer","remove","scale","style","bundleURL","getBundleURLCached","getBundleURL","Error","err","matches","stack","match","getBaseURL","url","replace","exports","bundle","require","updateLink","link","newLink","cloneNode","onload","href","Date","now","parentNode","insertBefore","nextSibling","cssTimeout","reloadCSS","setTimeout","links","querySelectorAll","i","length","module"],"mappings":"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","file":"main.bf6107ae.map","sourceRoot":"..","sourcesContent":["import \"../stylesheet/main.scss\"\n\nlet simpleLevelPlan = `\n......................\n..#................#..\n..#..............=.#..\n..#.........o.o....#..\n..#.@......#####...#..\n..#####............#..\n......#++++++++++++#..\n......##############..\n......................`;\n\n\nconst levelChars = {\n\t\".\": \"empty\", \"#\": \"wall\", \"+\": \"lava\",\n  \"@\": Player, \"o\": Coin,\n  \"=\": Lava, \"|\": Lava, \"v\": Lava\n};\n\nclass Level {\n\tconstructor(plan) {\n\t\tlet rows = plan.trim().split(\"\\n\").map(l => [...l]);\n\t\tthis.height = rows.lenght;\n\t\tthis.width = rows[0].lenght;\n\t\tthis.startActors = [];\n\n\t\tthis.rows = rows.map((row, y) => {\n\t\t\treturn row.map((ch, x) => {\n\t\t\t\tlet type = levelChars[ch];\n\t\t\t\tif (typeof type == \"string\") return type;\n\t\t\t\tthis.startActors.push(\n\t\t\t\t\ttype.create(new Vec(x, y), ch));\n\t\t\t\treturn \"empty\";\n\t\t\t});\n\t\t});\n\t}\n}\n\nclass State {\n\tconstructor(level, actors, status) {\n\t\tthis.level = level;\n\t\tthis.actors = actors;\n\t\tthis.status = status;\n\t}\n\tstatic start(level) {\n\t\treturn new State(level, level.startActors, \"playing\");\n\t}\n\tget player() {\n\t\treturn this.actors.find(a => a.type == \"player\");\n\t}\n}\n\nclass Vec {\n\tconstructor(x, y) {\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t}\n\tplus(other) {\n\t\treturn new Vec(this.x + other.x, this.y + other.y);\n\t}\n\ttimes(factor) {\n\t\treturn new Vec(this.x * factor, this.y * factor);\n\t}\n}\n\nclass Player {\n\tconstructor(pos, speed) {\n\t\tthis.pos = pos;\n\t\tthis.speed = speed;\n\t}\n\tget type() {\n\t\treturn \"player\";\n\t}\n\tstatic create(pos) {\n\t\treturn new Player(pos.plus(new Vec(0, -0.5)), new Vec(0, -0.5));\n\t}\n}\nPlayer.prototype.size = new Vec(0.8, 1.5);\n\nclass Lava {\n\tconstructor(pos, speed, reset) {\n\t\tthis.pos = pos;\n\t\tthis.speed = speed;\n\t\tthis.reset = reset;\n\t}\n\tget type() {\n\t\treturn \"lava\";\n\t}\n\tstatic create(pos, ch) {\n\t\tif (ch == \"=\") {\n\t\t\treturn new Lava(pos, new Vec(2, 0));\n\t\t} else if (ch == \"|\") {\n\t\t\treturn new Lava(pos, new Vec(0, 2));\n\t\t} else if (ch == \"v\") {\n\t\t\treturn new Lava(pos, new Vec(0, 3), pos);\n\t\t}\n\t}\n}\n\nLava.prototype.size = new Vec(1, 1);\n\nclass Coin {\n\tconstructor(pos, basePos, wobble) {\n\t\tthis.pos = pos;\n\t\tthis.basePos = basePos;\n\t\tthis.wobble = wobble;\n\t}\n\tget type() {\n\t\treturn \"coin\";\n\t}\n\tstatic create(pos) {\n\t\tlet basePos = pos.plus(new Vec(0.2, 0.1));\n\t\treturn new Coin(basePos, basePos, Math.random() * Math.PI * 2);\n\t}\n}\nCoin.prototype.size = new Vec(0.6, 0.6);\n\n// let simpleLevel = new Level(simpleLevelPlan);\n// console.log(simpleLevel.width, simpleLevel.height)\n\nfunction elt(name, attrs, ...children) {\n\tlet dom = document.createElement(name);\n\tfor(let attr of Object.keys(attrs)){\n\t\tdom.setAttribute(attr, attrs[attr]);\n\t}\n\tfor(let child of children) {\n\t\tdom.appendChild(child);\n\t}\n\treturn dom;\n}\n\n\nclass DOMDisplay {\n\tconstructor(parent, level) {\n\t\tthis.dom = elt(\"div\", {class: \"game\"}, drawGrid(level));\n\t\tthis.actorLayer = null;\n\t\tparent.appendChild(this.dom);\n\t}\n\tclear() { this.dom.remove(); }\n}\n\nconst scale = 20;\n\nfunction drawGrid(level){\n\treturn elt(\"table\", {\n\t\tclass: \"background\", style: `width: ${level.width * scale}px`\n\t}, ...level.rows.map(row => \n\t\telt(\"tr\", {style: `height: ${scale}px`},\n\t\t\t...row.map(type => elt(\"td\", {class: type})))\n\t));\n}\n\n\n","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var bundle = require('./bundle-url');\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    link.remove();\n  };\n  newLink.href = link.href.split('?')[0] + '?' + Date.now();\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      if (bundle.getBaseURL(links[i].href) === bundle.getBundleURL()) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nmodule.exports = reloadCSS;\n"]}